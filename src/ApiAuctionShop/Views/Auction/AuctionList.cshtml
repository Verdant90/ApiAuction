@model List<List<ApiAuctionShop.Models.Auctions>>
@{
    ViewData["Title"] = "Moje aukcje";
}


@if (Model[0].Count > 0)
{
    <h2>Moje aukcje</h2>
    <table class="table table-striped grid-table">
        <tr>
            <td>Lp.</td>
            <td>Tytuł</td>
            <td>Data rozpoczęcia</td>
            <td>Data zakończenia</td>
            <td>Cena wywoławcza</td>
            <td>Stan</td>
            <td></td>
        </tr>

        @foreach (var item in Model[0].Select((value, i) => new { i = ++i, value }))
        {
            <tr>
                <td>@item.i.</td>
                <td>
                @Html.ActionLink(item.value.title, "AuctionPage", "Auction", new {id = item.value.ID}, null)
                 </td>
                <td>@item.value.startDate</td>
                <td>@{@item.value.endDate;}</td>
                <td>@item.value.startPrice zł</td>
                <td>@item.value.state</td>
                <td>
                    @if (@item.value.state == "active")
                {
                    <input type="button" value="Edytuj" onclick="@("window.location.href='" + @Url.Action("Edit", "Auction", new { id = item.value.ID }) + "'");" />
                }
                    <input type="button" value="Zakończ" onclick="@("window.location.href='" + @Url.Action("End", "Auction") + "'");" />
                </td>
            </tr>
        }
    </table>
}

@if (Model[1].Count > 0)
{
    <h2>Wszystkie aukcje</h2>
    <table class="table table-striped grid-table">
        <tr>
            <td>Lp.</td>
            <td>Tytuł</td>
            <td>Autor</td>
            <td>Aktualna cena</td>
        </tr>

        @foreach (var item in Model[1].Select((value, i) => new { i = ++i, value }))
        {
            <tr>
                <td>@item.i.</td>
                <td>
                    @Html.ActionLink(item.value.title, "AuctionPage", "Auction", new { id = item.value.ID }, null)
                </td>
                <td>@item.value.Signup</td>
                <td>@item.value.startPrice</td>
            </tr>
        }
    </table>
}
